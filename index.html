<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://js.arcgis.com/4.17/esri/themes/light/main.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@latest/dist/css/splide.min.css">
    <link rel="stylesheet" href="/css/draw-styles.css">
    <link rel="stylesheet" href="/css/odometer.css">
    <script src="js/odometer.js"></script>
    
    <script src="https://js.arcgis.com/4.17/"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@latest/dist/js/splide.min.js"></script>
    
    <script type="module" src="js/app.js"></script>


    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <title>LAU Map Interactive (feature-client)</title>
  </head>
  <body>
    <script>
      window.onload = function() {
        var hidePopUp = document.getElementById('popupDiv');
        document.onclick = e => {
          if (e.target.id !== 'popupDiv') {
            popupDiv.style.display = 'none';
          }
        }
      }
    </script>
    <div id="popupDiv">
      <div class="popupDiv__header">
        <div id="popupDiv--closeButton">
          <a href="#" class="left"></a>
          <a href="#" class="right"></a>
        </div>
        <h1>LAU Map Interactive</h1>
        <h2>Last edit: 12/17/2020</h2>
      </div>
      <div id="popupDiv__text">
      <h3>&#128030 Bugs</h3>
      <p>
        Please report any bugs to <a href="https://nhm.org/person/markbreiter-daniel">Daniel Markbreiter</a>. </br>
        To report a bug, please first consult all reported bugs below. </br>
        Email Daniel with a detailed explanation of the issue, ideally with a screenshot of the issue.
      </p>
      <ul>
        <li> Image carousel arrows are visible when there are no more photos to swipe</li>
        <li>Fonts labels are not consistent between draw tool and click-to-select polygon</li>
        <li>Chart legend can overflow into chart area</li>
        <li>Info panel shows a maximum of “2000” localities found</li>
        <li>Lincoln Heights Whale currently in “Montecito Heights”</li>
        <li>San Clemente Island does not have a neighborhood</li>
        <li>Avalon is included in “Harbor” neighborhood</li>
      </ul>
      <h3>&#10004 Changelog:</h3>
      <ul>
        <li>First commit!</li>
      </ul>
      <h3>&#128296 Planned features:</h3>
      <ul>
        <li>“Coach marks” (semi-transparent overlay of tooltips/instructions) that are dismissed with first tap</li>
        <li>Percentage or numbers when pie chart section is tapped</li>
        <li>Add animations to prompt user to slide image carousel</li>
        <li>Add animations to prompt user to tap pie chart</li>
        <li>Add animations when info panels appear on screen</li>
        <li>“You are here” pin”</li>
        <li>Spanish language support</li>
        <li>Color blind/accessible chart color scheme </li>
      </ul>

      </div>

      
      

    </div>
    <div id="viewDiv">
      <div id="select-by-polygon" class="small-widget esri-widget--button esri-widget custom-widget esri-interactive" title="Select features by polygon">
        <svg viewBox="0 0 40 40" id="draw-widget" class="widget-button absolute-position" 
          <defs>
            <linearGradient id="linear-gradient" x1="28.29" y1="31.32" x2="33.32" y2="31.32" gradientUnits="userSpaceOnUse">
              <stop offset="0" stop-color="#444"/>
              <stop offset="1" stop-color="#444"/>
            </linearGradient>
            <linearGradient id="linear-gradient-2" x1="15.83" y1="25.51" x2="39.58" y2="25.51"
                            gradientTransform="matrix(1.3, 0.27, -0.24, 1.15, -5.05, -13.43)" 
                            gradientUnits="userSpaceOnUse">
              <stop offset="0" stop-color="#42afe5"/>
              <stop offset="1" stop-color="#3fdcff"/>
            </linearGradient>
          </defs>
          <path class="draw-path" class="draw-animation"
                id = "brush-path" 
                transform=translate(-3)
                d="M 28.31,11.68c-1.13.64-2.72,1.36-3.85,2-2,1.19-4,2.41-6,3.69
                    a 23.08,23.08,0,0,0-6.87,6.45
                    A 5.75,5.75,0,0,0,10.52,27,3.29,3.29,0,0,0,12,29.61
                    c 2.39,1.64,6.06,0,8-1.27,1-.69,1.69-1.25,2.49-1.88,1.3-1,2.62-2,4-3
                    a 18.94,18.94,0,0,1,5.36-2.72,5.32,5.32,0,0,1,2.57-.15,3.9,3.9,0,0,1,
                      1.68.89,3.28,3.28,0,0,1,1,1.62,3.2,3.2,0,0,1-.3, 2.17,6.43,6.43,0,0,
                      1-2.45,2.49,40.41,40.41,0,0,1-3.75,1.8,27.59,27.59,0,0,0-4.67,2.35,
                      2.76,2.76,0,0,0-1.22,1.89,2.4,2.4,0,0,0,1.92,2.4
                    c 2.48.54,3.86-2.19,6.09-2.58,1.7-.3,2.59,1.29,3.38,2.38"/>

        </svg>
        <div id="widget-label" class="absolute-position">Draw</div>
      </div>

      <div id="return-to-extent" 
        class="-widget esri-widget--button custom-widget esri-interactive esri-widget"
        title="Return map to original extent">
        <svg id="reset-widget" class= "widget-button" viewBox="0 0 43.18 48">
          <defs>
            <linearGradient id="linear-gradient" x1="28.61" y1="50.09" x2="28.39" y2="6.89" gradientUnits="userSpaceOnUse">
              <stop offset="0" stop-color="#42afe5"/>
              <stop offset="1" stop-color="#3fdcff"/>
            </linearGradient>
            <linearGradient id="linear-gradient-2" x1="29.16" y1="47.4" x2="28.94" y2="4.21" xlink:href="#linear-gradient"/>
          </defs>
          <path class="reset-path" 
                d="M 47.52, 22 
                    a 19.91, 19.91, 0, 0, 1, 1.07, 6.63 
                    A 20.09, 20.09, 0, 1, 1, 21, 9.9, 23.19, 23.19, 0, 0, 1, 32.49, 8.61
                    a 16.55, 16.55, 0, 0, 1, 7.45, 3" 
                transform="translate(-6.91 -2.65)"/>
          <polygon class="reset-arrowhead" points="23.81 12.36 23.49 10.59 32.23 9.04 30.05 0.44 31.8 0 34.45 10.48 23.81 12.36" transform="translate(1, 0.2)"/>
        </svg> 
        <div id="widget-label" class="absolute-position">Reset</div>
      </div>

      <div id="zoomDiv">
        <div id="zoom-in" 
        class="zoom custom-widget esri-widget--button custom-widget esri-interactive esri-widget"
        title="Zoom in">
     <span aria-hidden="true" role="presentation" class="esri-icon esri-icon-plus"></span>
   </div>

   <div id="zoom-out" 
        class="zoom custom-widget esri-widget--button custom-widget esri-interactive esri-widget"
        title="Zoom out">
     <span aria-hidden="true" role="presentation" class="esri-icon esri-icon-minus"></span>
   </div>

      </div>

      <div id="widgetContainer" class="widget-container">
        <div id="infoDiv" class="large-widget transition">
          <div id="noFossilsInfo"><h1>No fossils were found in </br> this area.</h1></div>
          <div id="taxaInfo" class="title">
            <div id="taxaText"><h1 id="featureCount" class="odometer"></h1><h1 id="featureText"></h1></div>
            <div id="outer-count-container">
              <div class="inner-count-container">
                <svg class="count-svg"xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 122 122">
                  <defs>
                    <filter id="shadow">
                      <feDropShadow dx="0" dy="0" stdDeviation="2" flood-opacity= "0.33"/>
                    </filter>
                    <style>
                      .circle {
                        fill: #33cfff;
                        filter: url(#shadow);
                      }
                      .shell{
                        fill: black;
                      }
                   </style>
                  </defs>
                    <circle class="circle" cx="61" cy="61" r="48.45"/>
                    <path class="shell" d="M56.75,47.78c0-.51.06-1,.15-1.44a5.19,5.19,0,0,1,4.54-4.13,10.8,10.8,0,0,1,4.37.36c.81-3.18,3.16-3.44,5.88-3.06.39-2.83,2.34-3.16,4.65-2.85.54-2,2-2.53,4.27-2.16a2.89,2.89,0,0,1,1.79-1.66,14.35,14.35,0,0,1,4.29-1c-.09,2.15-.6,5.31-2.36,6,.28,2.22-.23,3-2.35,3.65a3.82,3.82,0,0,1-.17,3.17,3.35,3.35,0,0,1-2.87,1.41,4.68,4.68,0,0,1-.38,3.58,4.12,4.12,0,0,1-3.16,1.72,7,7,0,0,1-.05,4.81,5.2,5.2,0,0,1-3.73,2.93c.16.63.36,1.23.47,1.84A5.23,5.23,0,0,1,70.43,66,15.18,15.18,0,0,1,68,67.8,3.14,3.14,0,0,1,65,68c-.27-.12-.53-.24-.81-.35-.17.87-.29,1.7-.51,2.51a7.18,7.18,0,0,1-5.52,5.22c-2.09.54-4.22,1-6.36,1.29a39.2,39.2,0,0,0-12.62,3.74.68.68,0,0,1-.2.07l-.07-.15c1.39-.77,2.76-1.57,4.17-2.3A47.25,47.25,0,0,1,54.46,74.3a28,28,0,0,0,3.58-1,5,5,0,0,0,3.54-4.46,20.33,20.33,0,0,0,.1-3.82c-.21-2.51-1.8-3.57-4.23-3a15.88,15.88,0,0,0-5.19,2.62,67.27,67.27,0,0,0-12.15,11.2c-2.23,2.57-4.26,5.32-6.38,8l-.25.3-.17,0c.13-1.16.21-2.33.4-3.48a27.59,27.59,0,0,1,5-11.44c1.68-2.41,3.4-4.8,5-7.26a17.77,17.77,0,0,0,2.53-8.4c.38-4.57,3.5-6.43,7.58-6.16C54.75,47.45,55.72,47.64,56.75,47.78Z" transform="translate(1 3)"/>
                </svg>
                <div class="taxa-count" id="invertCount"></div>

              </div>
              <div class="inner-count-container">
                <svg class="count-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 122 122">
                  <defs>
                    <filter id="shadow">
                      <feDropShadow dx="0" dy="0" stdDeviation="2" flood-opacity= "0.33"/>
                    </filter>
                    <style>
                      .circle {
                        fill: #33cfff;
                        filter: url(#shadow);
                      }
                      .shell{
                        fill: black;
                      }
                   </style>
                  </defs>
                    <circle class="circle" cx="61" cy="61" r="48.45"/>
                    <path class="shell" d="M56.75,47.78c0-.51.06-1,.15-1.44a5.19,5.19,0,0,1,4.54-4.13,10.8,10.8,0,0,1,4.37.36c.81-3.18,3.16-3.44,5.88-3.06.39-2.83,2.34-3.16,4.65-2.85.54-2,2-2.53,4.27-2.16a2.89,2.89,0,0,1,1.79-1.66,14.35,14.35,0,0,1,4.29-1c-.09,2.15-.6,5.31-2.36,6,.28,2.22-.23,3-2.35,3.65a3.82,3.82,0,0,1-.17,3.17,3.35,3.35,0,0,1-2.87,1.41,4.68,4.68,0,0,1-.38,3.58,4.12,4.12,0,0,1-3.16,1.72,7,7,0,0,1-.05,4.81,5.2,5.2,0,0,1-3.73,2.93c.16.63.36,1.23.47,1.84A5.23,5.23,0,0,1,70.43,66,15.18,15.18,0,0,1,68,67.8,3.14,3.14,0,0,1,65,68c-.27-.12-.53-.24-.81-.35-.17.87-.29,1.7-.51,2.51a7.18,7.18,0,0,1-5.52,5.22c-2.09.54-4.22,1-6.36,1.29a39.2,39.2,0,0,0-12.62,3.74.68.68,0,0,1-.2.07l-.07-.15c1.39-.77,2.76-1.57,4.17-2.3A47.25,47.25,0,0,1,54.46,74.3a28,28,0,0,0,3.58-1,5,5,0,0,0,3.54-4.46,20.33,20.33,0,0,0,.1-3.82c-.21-2.51-1.8-3.57-4.23-3a15.88,15.88,0,0,0-5.19,2.62,67.27,67.27,0,0,0-12.15,11.2c-2.23,2.57-4.26,5.32-6.38,8l-.25.3-.17,0c.13-1.16.21-2.33.4-3.48a27.59,27.59,0,0,1,5-11.44c1.68-2.41,3.4-4.8,5-7.26a17.77,17.77,0,0,0,2.53-8.4c.38-4.57,3.5-6.43,7.58-6.16C54.75,47.45,55.72,47.64,56.75,47.78Z" transform="translate(1 3)"/>
                </svg>
                <div class="taxa-count" id="vertCount"></div>

              </div>
            </div>
          </div>

        </div>
        <div id="sliderDiv" class="splide transition large-widget">

          <h1>Swipe to see local fossils!</h1>
          
          <div class="splide__track">
            <ul class="splide__list">
            </ul>
          </div>
        </div>
        <div id="noFossilsDiv" class="transition large-widget"><h1>No fossils were found in </br> this area.</h1></div>
      </div>


    </div>
  </body>
</html>